export const stageLabels = {
  lobby: "대기실",
  briefing: "브리핑",
  clue_a: "1차 단서 공개",
  discussion_a: "1차 토론",
  clue_b: "2차 단서 공개",
  discussion_b: "2차 토론",
  clue_c: "3차 단서 공개",
  final_discussion: "최종 토론",
  voting: "최후 투표",
  result: "결과 발표"
};

export const stageOrder = [
  "lobby",
  "briefing",
  "clue_a",
  "discussion_a",
  "clue_b",
  "discussion_b",
  "clue_c",
  "final_discussion",
  "voting",
  "result"
];

export const stageDurations = {
  lobby: 0,
  briefing: 5 * 60,
  clue_a: 6 * 60,
  discussion_a: 8 * 60,
  clue_b: 6 * 60,
  discussion_b: 8 * 60,
  clue_c: 6 * 60,
  final_discussion: 9 * 60,
  voting: 3 * 60,
  result: 0
};

export function getStageDurationMs(stageKey) {
  return (stageDurations[stageKey] || 0) * 1000;
}

export const readyEligibleStages = [
  "briefing",
  "clue_a",
  "discussion_a",
  "clue_b",
  "discussion_b",
  "clue_c",
  "final_discussion"
];

export const readyVoteThreshold = 0.6;

export function getReadyVoteRequirement(totalPlayers, threshold = readyVoteThreshold) {
  if (!totalPlayers) return 0;
  const clampedThreshold = Math.max(0, Math.min(threshold, 1));
  if (clampedThreshold === 0) {
    return 0;
  }
  if (clampedThreshold >= 1) {
    return totalPlayers;
  }
  const required = Math.ceil(totalPlayers * clampedThreshold);
  return Math.max(1, Math.min(required, totalPlayers));
}

export function isReadyVoteStage(stageKey) {
  return readyEligibleStages.includes(stageKey);
}

export const scenarios = [
  {
    id: "midnight-theater",
    title: "자정의 커튼콜",
    tagline: "중단된 공연 뒤편, 마지막 장면의 진실을 추격하라",
    difficulty: "중급",
    tone: "네오 누아르",
    duration: "120분",
    playerRange: { min: 4, max: 7 },
    summary:
      "대형 뮤지컬의 프리뷰 공연이 끝나고 10분 후, 주연 배우가 무대 뒤에서 의식을 잃은 채 발견됩니다. 모든 출연진은 무대 장치 리허설 중이었고, 외부인은 출입이 통제된 상황. 무대 감독인 당신은 해체되는 무대의 위험 요소와 숨겨진 경쟁을 파헤쳐야 합니다.",
    motifs: [
      "라이브 방송 준비로 모든 동선이 실시간 기록됨",
      "경쟁 극단에서 스파이를 심었다는 소문",
      "주연 배우가 계약 연장을 놓고 제작사와 갈등"
    ],
    conflicts: [
      "사건 직전 마지막으로 피해자를 본 사람은 누구인가?",
      "무대 장치가 의도적으로 조작되었는가?",
      "피해자의 백스테이지 이동 기록이 조작되었는가?"
    ],
    prompts: [
      "커튼콜 직전 피해자의 이동 경로를 아는 사람은 누구인가?",
      "삭제된 음성 메시지를 복구하거나 누가 삭제했는지 규명할 수 있는가?",
      "무대 장치 조작이 단독 범행인지 공모인지 여부"
    ],
    timeline: [
      { time: "18:30", description: "전체 출연진 무대 리허설 시작" },
      { time: "19:10", description: "피해자가 분장실에서 통화하는 모습 목격" },
      { time: "19:25", description: "조명 담당이 2막 세트를 점검 (피해자 동선과 겹침)" },
      { time: "19:40", description: "프리뷰 공연 종료, 커튼콜 진행" },
      { time: "19:45", description: "피해자가 무대 뒤 패널 존에서 의식을 잃은 채 발견" }
    ],
    evidence: {
      physical: [
        "무대 장치용 와이어가 절단된 흔적",
        "피해자의 대본에서 찢겨나간 마지막 장면의 페이지",
        "백스테이지 열쇠가 한 개 분실되어 보안 캐비넷이 강제로 열림"
      ],
      digital: [
        "무대 감시 카메라 19:20~19:30 공백 구간",
        "피해자 휴대전화 메신저에 삭제된 음성 메시지",
        "스트리밍 서버 로그에서 비인가 접속 시도 2회"
      ]
    },
    characters: [
      {
        name: "한서율",
        title: "주연 배우",
        description:
          "부상 전력이 있으나 무대 복귀를 서두른 인물. 경쟁 극단에서 스카웃 제안이 있었다는 소문이 돌고 있다."
      },
      {
        name: "백도현",
        title: "조명 감독",
        description:
          "무대 안전을 총괄하지만 제작진과 잦은 충돌을 겪었다. 전날 퇴사 의사를 밝혔다."
      },
      {
        name: "문지후",
        title: "스윙 배우",
        description:
          "주연 대체 후보. 커튼콜 전 피해자와 말다툼을 벌였다. 무대 장치 조작에 능숙하다."
      },
      {
        name: "윤가빈",
        title: "제작사 홍보팀",
        description:
          "라이브 커머스 연동 프로젝트를 총괄. 공연 흥행을 위해 사건을 활용하려는 듯한 발언을 남겼다."
      },
      {
        name: "최리안",
        title: "분장 스태프",
        description:
          "분장실 키를 관리한다. 사건 직전 피해자가 누군가에게 부탁받은 듯 조용히 나간 것을 보았다."
      }
    ],
    roles: {
      detective: [
        {
          name: "김도윤",
          title: "무대 감독",
          briefing:
            "당신은 무대 전반을 통제하는 감독입니다. 안전 제어 패널과 무전 로그를 누구보다 빠르게 조회할 수 있습니다. 진실을 끄집어내기 위해 얻은 정보의 신빙성을 검토하세요.",
          truths: [
            "안전 제어 패널 로그에는 19:33에 'BDOH' 계정으로 안전잠금 해제 기록이 남아 있습니다. 이는 조명팀 전용 계정입니다.",
            "와이어 잠금 장치에서 조명팀 전용 절연 장갑 섬유가 발견되었습니다."
          ],
          misdirections: [
            "라이브 스트리밍 서버의 비인가 접속은 윤가빈이 관리하는 태블릿에서 발생한 것으로 보입니다.",
            "피해자가 커튼콜 직전 문지후에게 '대타 준비'라는 문자를 보냈습니다."
          ]
        }
      ],
      culprit: [
        {
          name: "백도현",
          title: "조명 감독",
          briefing:
            "당신은 와이어 잠금 장치를 해제해 피해자를 낙상시킨 범인입니다. 안전 결함을 장비 탓으로 돌리고, 공연 성공을 바라는 타인의 욕심을 이용해 의심을 분산시켜야 합니다.",
          truths: [
            "당신은 19:32에 비상 패널에서 안전 잠금을 해제하고, 백스테이지 조명 스위치를 오프라인 모드로 전환했습니다.",
            "문지후와의 언쟁 직후, 최리안이 분장실 키를 찾으러 온 것을 목격했습니다. 그가 당신의 위치를 정확히 기억하지 못하길 바랍니다."
          ],
          misdirections: [
            "윤가빈이 스트리밍 흥행을 위해 위험을 감수하자고 제안했다는 이야기를 흘리십시오.",
            "피해자가 새 계약 문제로 제작사와 갈등했다는 사실을 강조해 내부 배신을 암시하십시오."
          ],
          exposed: [
            "무대 감시 카메라 공백 직후, 당신이 비상 패널에 접근했다는 로그가 남아 있습니다.",
            "안전장치 절단 흔적에서 조명팀 전용 절연 장갑 섬유가 검출되었습니다."
          ]
        }
      ],
      suspects: [
        {
          name: "한서율",
          title: "주연 배우",
          summary:
            "부상 사실을 숨긴 채 공연에 복귀한 스타. 경쟁 극단 이적설이 무성하다.",
          briefing:
            "당신은 주연 자리를 지키기 위해 무엇이든 할 각오가 되어 있습니다. 하지만 범인이 누구인지 정확히 짚어내야 당신에게 드리운 의심을 거둘 수 있습니다.",
          truths: [
            "리허설 종료 후 백도현이 와이어 안전고리를 꺼내 두 손으로 점검하는 모습을 봤습니다.",
            "무대 위에서 타이머를 맞추던 백도현이 '이제 한 번만 더 내리면 된다'고 혼잣말하는 것을 들었습니다."
          ],
          misdirections: [
            "윤가빈이 라이브 방송에 사고 장면을 그대로 내보내자고 했다는 소문을 들었습니다.",
            "문지후가 피해자에게 '다음 장면은 네가 필요 없다'고 말하는 것을 들었습니다."
          ]
        },
        {
          name: "문지후",
          title: "스윙 배우",
          summary:
            "주연 대체 후보. 커튼콜 직전 피해자와 말다툼을 벌였다.",
          briefing:
            "당신은 대타 기회를 노리고 있었지만, 진짜 범인이 아니라는 사실을 입증해야 합니다. 동시에 자신이 본 것을 공유해야 합니다.",
          truths: [
            "백도현이 조명 테스트를 이유로 패널 존을 홀로 비우게 해 달라고 요구했습니다.",
            "와이어 교체 시간표에 백도현의 이름이 두 번 겹쳐 적혀 있는 것을 발견했습니다."
          ],
          misdirections: [
            "한서율이 무대 진입 전, 누군가와 몰래 통화하며 '이제 끝내자'고 말했습니다.",
            "스트리밍 서버 접근 기록에 홍보팀 공용 계정이 여러 번 등장했습니다."
          ]
        },
        {
          name: "윤가빈",
          title: "제작사 홍보팀",
          summary:
            "라이브 커머스 연동 프로젝트를 총괄. 사건을 흥행 요소로 활용하려 한다.",
          briefing:
            "당신은 홍보 성과를 위해 위험을 감수하려 하지만 살인까지 저지를 사람은 아닙니다. 대신 디지털 흔적을 통해 진범을 찾아야 합니다.",
          truths: [
            "조명 콘솔 계정 'BDOH'는 백도현만 사용하는 개인 계정입니다.",
            "19:28 이후 조명 시스템이 수동 모드로 전환되면서 와이어 센서 로그가 끊겼습니다."
          ],
          misdirections: [
            "분장실 열쇠가 사라진 시간대에 최리안이 자리를 비웠다는 보고를 받았습니다.",
            "피해자가 경쟁 극단 PD와 메시지를 주고받았다는 사실을 알아냈습니다."
          ]
        },
        {
          name: "최리안",
          title: "분장 스태프",
          summary:
            "분장실 키를 관리하는 인물. 피해자의 마지막 동선을 확인한 증인.",
          briefing:
            "당신은 분장실과 백스테이지를 잇는 마지막 목격자입니다. 기억을 되살려 사실을 전달하는 것이 중요합니다.",
          truths: [
            "백도현이 분장실 키 캐비닛을 잠깐 열어보더니 바로 닫았습니다.",
            "피해자가 쓰러진 곳의 바닥에는 조명 오일 냄새가 강하게 났습니다."
          ],
          misdirections: [
            "한서율이 공연 직전 무릎을 붙잡고 통증을 호소하며 쉬자고 제안했습니다.",
            "문지후 가방에서 와이어 조정 렌치가 발견됐습니다."
          ]
        }
      ]
    }
  },
  {
    id: "winter-lodge",
    title: "겨울 산장의 봉인",
    tagline: "폭설로 고립된 로지, 은폐된 거래를 밝혀라",
    difficulty: "상급",
    tone: "서스펜스",
    duration: "150분",
    playerRange: { min: 5, max: 8 },
    summary:
      "폐쇄 투자 모임이 열리는 고급 산장에서 주최자가 의문사한 채 발견됩니다. 폭설로 인해 외부와 단절된 상황에서 참가자들은 서로의 비밀을 숨기고 있습니다. 제한된 통신 장비와 손상된 발전기를 복구해 탈출 시간을 확보해야 합니다.",
    motifs: [
      "지하 안전 금고가 비상시에만 열리는 구조",
      "위성 전화가 고장 나고 아날로그 무전기만 사용 가능",
      "투자 계약서 원본이 산장 어딘가에 숨겨져 있음"
    ],
    conflicts: [
      "누가 발전기 차단기를 내렸는가?",
      "주최자는 왜 개인 금고를 비우지 못했는가?",
      "산장에 침입자가 더 있었을 가능성이 있는가?"
    ],
    prompts: [
      "전력 차단이 우연인지 계획적 범행인지 구분",
      "주최자가 감추려던 거래 기록의 성격 파악",
      "무전기로 연결된 외부 인물이 있었는지 확인"
    ],
    timeline: [
      { time: "20:00", description: "투자 모임 웰컴 디너 시작" },
      { time: "21:10", description: "주최자가 개인 서재에서 마지막 통화를 함" },
      { time: "21:40", description: "전기가 5분간 끊기고 비상 발전기 가동" },
      { time: "21:55", description: "참가자 전원이 로비에 모여 주최자를 찾기 시작" },
      { time: "22:05", description: "지하 금고 앞에서 주최자 시신 발견" }
    ],
    evidence: {
      physical: [
        "금고 앞 바닥에 남은 미세한 석유 얼룩",
        "주최자 수첩에서 찢겨나간 익명 메모",
        "위성 전화 배터리가 고의로 제거된 흔적"
      ],
      digital: [
        "주최자 노트북에 암호화된 거래 기록",
        "비상 발전기 제어 패널 로그",
        "참가자 중 한 명의 스마트워치 위치 기록"
      ]
    },
    characters: [
      {
        name: "이하준",
        title: "헤지펀드 매니저",
        description: "주최자와 공동 투자 계약 파기를 두고 소송 중이었다."
      },
      {
        name: "박세은",
        title: "테크 스타트업 CEO",
        description: "주최자의 지분 회수를 조건으로 산장에 초대됐다. 발전기 구조에 익숙하다."
      },
      {
        name: "정민오",
        title: "산장 관리자",
        description: "폭설 대비를 책임졌으나 발전기 점검을 미루었다. 산장의 비밀 통로를 알고 있다."
      },
      {
        name: "개브리엘 최",
        title: "사설 탐정",
        description: "누군가에게 의뢰받아 모임에 잠입했다. 사건 직후 금고 주변에서 목격됨."
      },
      {
        name: "엘라 김",
        title: "예술품 브로커",
        description: "주최자에게 투자 사기를 당해 복수하려 했다."
      },
      {
        name: "카밀라 윤",
        title: "위성 통신 엔지니어",
        description: "위성 전화 유지보수를 맡았으나 배터리를 회수했다."
      }
    ],
    roles: {
      detective: [
        {
          name: "개브리엘 최",
          title: "사설 탐정",
          briefing:
            "당신은 의뢰를 받아 잠입한 사설 탐정입니다. 주최자가 숨기려 했던 거래 기록과 전력 차단 타이밍의 연관성을 파헤치십시오.",
          truths: [
            "발전기 차단기는 두 차례 내려갔고, 첫 번째는 21:37에 매뉴얼로 조작되었습니다.",
            "주최자의 노트북에서 'FuelReserve_BD'라는 파일이 암호화되어 있으며, 이는 이하준의 별칭과 일치합니다."
          ],
          misdirections: [
            "카밀라 윤의 작업 가방에서 위성 전화 배터리가 발견되었습니다.",
            "정민오가 비밀 통로 설계도를 숨겼다는 제보를 들었습니다."
          ]
        }
      ],
      culprit: [
        {
          name: "이하준",
          title: "헤지펀드 매니저",
          briefing:
            "당신은 몰락을 피하기 위해 주최자의 금고에서 계약 원본을 빼내려 했고, 저항하던 주최자를 살해했습니다. 폭설 속에서도 의심을 분산시켜야 합니다.",
          truths: [
            "당신은 비상 발전기 연료 탱크에 미량의 석유를 흘려 흔적을 남겼습니다.",
            "주최자의 금고 비밀번호 변경 시도를 당신이 가로막았고, 무전기로 엿들은 개브리엘이 이를 알고 있습니다."
          ],
          misdirections: [
            "전력 차단 직후 박세은이 발전기실에서 땀에 젖은 모습으로 나왔다는 이야기를 강조하십시오.",
            "주최자 수첩에서 스타트업 투자 취소 메모가 발견되었다는 사실을 부각시키십시오."
          ],
          exposed: [
            "금고 앞 석유 얼룩은 당신의 보조 연료통에서 흘러나온 것입니다.",
            "스마트워치 기록상 21:35~21:45 동안 당신은 금고 구역에 머물렀습니다."
          ]
        }
      ],
      suspects: [
        {
          name: "박세은",
          title: "스타트업 CEO",
          summary:
            "발전기 제어 패널에 익숙한 기술 창업가. 계약 복원을 원한다.",
          briefing:
            "당신은 발전기 제어를 도왔지만 살인은 저지르지 않았습니다. 대신 로그가 조작되었음을 입증해야 합니다.",
          truths: [
            "발전기 제어 패널에 'Manual Override: Manual Lever 2' 로그가 21:37에 남아 있습니다.",
            "주최자가 위성 전화로 '계약서를 지키면 다 끝난다'고 말하는 것을 들었습니다."
          ],
          misdirections: [
            "정민오가 비밀 통로의 눈을 치우지 않았다는 사실을 발표했습니다.",
            "카밀라 윤이 위성 전화 배터리를 챙긴 뒤 어딘가에 숨겼습니다."
          ]
        },
        {
          name: "정민오",
          title: "산장 관리자",
          summary:
            "산장의 모든 설비를 책임진 관리자. 폭설 대비를 총괄했다.",
          briefing:
            "당신은 설비를 지켰지만 범행을 저지르지 않았습니다. 대신 외부 침입 가능성을 입증하거나 진범을 지목해야 합니다.",
          truths: [
            "이하준이 몰래 창고에서 예비 연료통을 챙겨 나가는 것을 봤습니다.",
            "비밀 통로는 폭설로 막혀 실제로 사용할 수 없었습니다."
          ],
          misdirections: [
            "엘라 김이 주최자에게 사기를 당해 복수하려 했다는 소문이 있습니다.",
            "개브리엘 최가 금고 앞에 가장 먼저 도착했습니다."
          ]
        },
        {
          name: "엘라 김",
          title: "예술품 브로커",
          summary:
            "주최자에게 사기를 당했고 복수를 다짐했다.",
          briefing:
            "당신은 분노했지만 살인을 저지르지는 않았습니다. 대신 누가 계약서를 노렸는지 밝혀야 합니다.",
          truths: [
            "이하준이 주최자 노트북 암호를 알고 있다는 사실을 목격했습니다.",
            "주최자가 금고에서 꺼내려던 계약서는 이하준과의 공동 투자 계약서였습니다."
          ],
          misdirections: [
            "박세은이 발전기 매뉴얼을 몰래 가져갔습니다.",
            "카밀라 윤이 위성 전화 로그를 지웠다는 이야기를 들었습니다."
          ]
        },
        {
          name: "카밀라 윤",
          title: "위성 통신 엔지니어",
          summary:
            "위성 전화 유지보수를 맡았으나 배터리를 회수했다.",
          briefing:
            "당신은 통신 장비를 지켰지만, 범인을 지목할 단서를 쥐고 있습니다.",
          truths: [
            "주최자의 마지막 통화는 이하준과의 협박성 대화였습니다.",
            "비상 발전기 오프라인 전환은 조작 흔적 없이 수동으로 이뤄졌습니다."
          ],
          misdirections: [
            "정민오가 몰래 통로를 정비했다는 기록을 찾았습니다.",
            "엘라 김이 주최자 금고 비밀번호를 캐물었습니다."
          ]
        }
      ]
    }
  },
  {
    id: "seoul-cyber",
    title: "서울 사이버 포렌식",
    tagline: "도시 전역을 가로지르는 디지털 미스터리",
    difficulty: "중상급",
    tone: "테크 스릴러",
    duration: "110분",
    playerRange: { min: 3, max: 6 },
    summary:
      "수사기관과 협력하는 민간 포렌식 팀이 서울 전역에 퍼진 사이버 테러 시도에 맞섭니다. 핵심 단계는 오프라인 단서를 디지털 증거와 연결짓는 것입니다. 플레이어는 서로 다른 포지션의 분석 결과를 교차 검증해야 합니다.",
    motifs: [
      "복수의 데이터 센터에서 수집된 로그를 통합 분석",
      "도심 CCTV가 15분간 일제히 블랙아웃",
      "의심 IP가 실제론 도심 내 이동형 기기"
    ],
    conflicts: [
      "누가 데이터 센터 접근 권한을 악용했는가?",
      "블랙아웃 구간에 현장 팀이 놓친 물리적 단서는 무엇인가?",
      "협력기관 내부에 공모자가 있는가?"
    ],
    prompts: [
      "CCTV 블랙아웃을 유발한 실제 장비 확인",
      "도심 기지국 이동 기록과 용의자 동선을 매칭",
      "루트킷 설치 후 실제로 훔치려 한 데이터 파악"
    ],
    timeline: [
      { time: "14:00", description: "사이버 경찰청이 이상 로그를 감지" },
      { time: "14:25", description: "블랙아웃 구간 동안 중요 서버에 루트킷 설치" },
      { time: "14:40", description: "시내 드론 촬영 영상에서 수상한 화물차 포착" },
      { time: "15:05", description: "포렌식 팀이 현장 증거 확보" },
      { time: "15:20", description: "용의자 중 한 명이 도주 시도하다 체포" }
    ],
    evidence: {
      physical: [
        "루트킷가 저장된 마이크로 SD 카드",
        "블랙아웃 구간에서 발견된 NFC 접속 장치",
        "화물차 적재함에서 나온 은닉 서버 랙"
      ],
      digital: [
        "포렌식 이미지에서 발견된 변조 로그",
        "SNS 제보로 수집된 용의자 동선",
        "도청된 내부 통신 녹취"
      ]
    },
    characters: [
      {
        name: "차보민",
        title: "화이트해커 출신 분석가",
        description: "예전 동료가 이번 사건에 연루된 것으로 의심되어 흔들리고 있다."
      },
      {
        name: "류현우",
        title: "데이터 센터 엔지니어",
        description: "블랙아웃 직전 야근 근무표를 임의로 바꿨다."
      },
      {
        name: "미야 자키",
        title: "국제 통신사 연락 담당",
        description: "해외 통신사와 협조를 담당하지만 모회사로 정보를 흘릴 수 있는 위치다."
      },
      {
        name: "박도인",
        title: "프리랜서 드론 조종사",
        description: "사건 직후 드론 로그를 삭제하려 했다."
      },
      {
        name: "알렉스 강",
        title: "시스템 감사관",
        description: "블랙아웃 경고를 받고도 묵살한 인물."
      },
      {
        name: "신혜란",
        title: "위기 커뮤니케이션 책임자",
        description: "SNS 제보를 분류하며 내부 유출자를 추적한다."
      }
    ],
    roles: {
      detective: [
        {
          name: "차보민",
          title: "포렌식 리드",
          briefing:
            "당신은 민간 포렌식 팀 리드입니다. 루트킷 설치 타이밍과 내부 공모 정황을 밝혀내야 합니다.",
          truths: [
            "루트킷 설치 3분 전, 데이터 센터 내부망에서 관리자 계정 'ryu-admin'이 MFA 없이 접속했습니다.",
            "CCTV 블랙아웃 구간 이후, NFC 장치가 서버실 문 잠금을 해제한 기록이 남아 있습니다. 이 장치는 내부 직원만 접근 가능한 락커에서 사라졌습니다."
          ],
          misdirections: [
            "SNS 제보 사진에서 화물차를 모는 사람의 실루엣이 박도인과 유사합니다.",
            "국제 통신사에서 제공한 백업 로그가 일부 조작된 것으로 보입니다."
          ]
        }
      ],
      culprit: [
        {
          name: "류현우",
          title: "데이터 센터 엔지니어",
          briefing:
            "당신은 내부 엔지니어로서 루트킷을 설치한 범인입니다. 외부 협력자를 탓하며 내부 비리를 가리려고 합니다.",
          truths: [
            "당신은 루트킷 모듈을 설치한 뒤, 은닉 서버 랙에 퀵 배터리를 연결해 백업을 우회했습니다.",
            "내부 공모자는 없지만, 알렉스 강이 경고를 묵살한 사실을 이용해 책임을 덮어씌울 수 있습니다."
          ],
          misdirections: [
            "박도인이 드론으로 서버실 창문을 촬영했다는 사실을 강조하십시오.",
            "국제 통신사가 제공한 암호 키가 유출되었다고 주장하십시오."
          ],
          exposed: [
            "관리자 계정 'ryu-admin'은 당신의 개인 계정이며 MFA 해제는 보안팀 승인 없이 불가능합니다.",
            "NFC 장치는 당신이 관리하던 락커에서 사라졌으며, 접근 로그에 당신 카드가 찍혀 있습니다."
          ]
        }
      ],
      suspects: [
        {
          name: "미야 자키",
          title: "국제 통신사 연락 담당",
          summary:
            "해외 통신사와 협조를 담당한다. 암호 키를 관리한다.",
          briefing:
            "당신은 국제 협력 창구입니다. 내부 배신자를 색출해야 하며, 외부 유출 의혹을 해명해야 합니다.",
          truths: [
            "국제 통신사가 제공한 암호 키는 모두 사용 로그가 남으며 유출 흔적이 없습니다.",
            "블랙아웃 구간 동안 내부망 접속은 단 한 번, 관리자 계정이었습니다."
          ],
          misdirections: [
            "박도인에게서 화물차 촬영 원본을 아직 받지 못했습니다.",
            "알렉스 강이 경고 이메일을 무시했다는 보고서를 받았습니다."
          ]
        },
        {
          name: "박도인",
          title: "드론 조종사",
          summary:
            "현장 드론 촬영 데이터를 수집했다. 로그를 삭제하려 했다.",
          briefing:
            "당신은 촬영 데이터를 보유하고 있습니다. 자신의 의심을 벗고 진범을 지목해야 합니다.",
          truths: [
            "드론은 블랙아웃 직후 서버실 옥상 배기구를 촬영했고, 누군가가 긴급 배터리를 투입하는 모습이 찍혔습니다.",
            "은닉 서버 랙은 데이터 센터 내부자만 아는 비상실에 설치돼 있었습니다."
          ],
          misdirections: [
            "미야 자키가 통신사에 보고하지 않은 키를 따로 보관하고 있었습니다.",
            "차보민이 백업 로그를 재작성했다는 소문이 있습니다."
          ]
        },
        {
          name: "알렉스 강",
          title: "시스템 감사관",
          summary:
            "블랙아웃 경고를 받고도 묵살한 인물.",
          briefing:
            "당신은 경고를 묵살했지만 범인이 아닙니다. 책임을 뒤집어쓰지 않으려면 진범을 지목해야 합니다.",
          truths: [
            "경고 이메일은 류현우가 보낸 '유지보수 테스트'로 위장된 메시지였습니다.",
            "루트킷 설치 이후 백업이 중단된 사실을 차보민에게 보고했지만, 이미 늦었습니다."
          ],
          misdirections: [
            "박도인의 드론 로그가 삭제된 것은 의도적인 증거 인멸일 수 있습니다.",
            "국제 통신사 측에서 특수 장비 반입 허가를 요청했다는 기록이 있습니다."
          ]
        },
        {
          name: "신혜란",
          title: "위기 커뮤니케이션 책임자",
          summary:
            "SNS 제보를 분류하며 내부 유출자를 추적한다.",
          briefing:
            "당신은 여론 통제를 담당합니다. 내부 고발을 수집해 진범을 노출시키세요.",
          truths: [
            "익명 제보자가 '엔지니어가 서버 랙을 옮기고 있다'는 영상을 보냈습니다.",
            "블랙아웃 5분 전, 류현우가 서버실 옆 장비실에서 휴대폰을 비행기 모드로 전환했습니다."
          ],
          misdirections: [
            "미야 자키가 모회사에 사건 정보를 미리 보고했습니다.",
            "알렉스 강이 경고 시스템 테스트를 중단시키라는 지시를 내렸습니다."
          ]
        }
      ]
    }
  }
];

export function registerScenario(scenario) {
  if (!scenario || !scenario.id) {
    return;
  }
  const index = scenarios.findIndex((item) => item.id === scenario.id);
  if (index !== -1) {
    scenarios[index] = scenario;
    return;
  }
  scenarios.push(scenario);
}

export function registerScenarios(list = []) {
  list.filter(Boolean).forEach((scenario) => {
    registerScenario(scenario);
  });
}

export function getScenarioById(id) {
  return scenarios.find((scenario) => scenario.id === id) || scenarios[0];
}

export function formatPlayerRange(range) {
  if (!range) return "-";
  return `${range.min} ~ ${range.max}명`;
}
